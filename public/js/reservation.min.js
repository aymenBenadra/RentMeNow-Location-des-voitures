"use strict";var vehicles=document.querySelector("#vehicles"),bav=document.getElementsByName("bav"),moteur=document.querySelector("#moteur"),moteurOptions=document.querySelectorAll("#moteur option"),jours=document.querySelector("#jours"),rebriquePrix=document.querySelector("#rebriquePrix"),printButton=document.querySelector("#print"),intl=new Intl.NumberFormat("fr-FR"),price={net:0,moteur:0,total:0};fetch("./assets/db/vehicles.json").then(function(a){return a.json()}).then(function(a){return renderData(a)});function renderData(a){var c,d=a.vehicles,e=a.moteurTTC;vehicles.addEventListener("change",function(a){"--"==a.target.value?(document.querySelector("#reservation-form").reset(),bav.forEach(function(a){a.checked=!1}),moteurOptions[0].selected=!0,jours.value=1,jours.disabled=!0,printButton.disabled=!0,rebriquePrix.value=""):(c=d.filter(function(b){return b.type==a.target.value})[0],bav.forEach(function(a){a.checked=!(c.bav!=a.value)}),moteurOptions[0].selected=!0,moteurOptions.forEach(function(a){console.log(a.disabled),a.disabled=!(c.moteur.includes(a.value)||"--"==a.value)}),jours.disabled=!1,printButton.disabled=!1,price.net="auto"==c.bav?c.tarif+.19*c.tarif:c.tarif,price.total=price.net*jours.value,document.querySelector("#prix").value=intl.format(price.total),rebriquePrix.value=printableText(c))}),moteur.addEventListener("change",function(a){"--"==a.target.value?(0!=price.moteur&&(price.total-=price.moteur,price.moteur=0),document.querySelector("#prix").value=intl.format(price.total*jours.value)):(0!=price.moteur&&(price.total-=price.moteur,price.moteur=0),price.moteur=price.net*e[a.target.value],price.total+=price.moteur,document.querySelector("#prix").value=intl.format(price.total*jours.value)),rebriquePrix.value=printableText(c)}),jours.addEventListener("change",function(a){document.querySelector("#prix").value=intl.format(price.total*a.target.value),rebriquePrix.value=printableText(c)}),printButton.addEventListener("click",function(){document.querySelectorAll(".nonPrintable").forEach(function(a){a.style.visibility="hidden"}),window.print(),document.querySelectorAll(".nonPrintable").forEach(function(a){a.style.visibility="visible"})})}function printableText(a){intl=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"});var b="Selected Vehicle: ".concat(a.type,"\n+").concat(intl.format(a.tarif),"\nSelected BAV: ").concat("auto"==a.bav?"+19%":"+0%","\nPrix sans Moteur: ").concat(intl.format(price.net),"\n").concat(0==price.moteur?"":"Moteur: +"+intl.format(price.moteur)+"\n").concat(0==price.moteur?"":"Prix avec Moteur: "+intl.format(price.net+price.moteur)+"\n","Jours: ").concat(jours.value,"\nPrix Total: ").concat(intl.format(price.total*jours.value));return b}
//# sourceMappingURL=reservation.min.js.map