{"version":3,"sources":["../../src/js/reservation.js"],"names":["reservation","document","querySelector","vehicles","vehicleOptions","querySelectorAll","bav","getElementsByName","moteur","moteurOptions","jours","rebriquePrix","moteurTTC","electrique","hybride","essence","diesel","price","net","ttc","vehicleData","fetch","then","res","json","data","renderVehicle","vehiclesData","addEventListener","event","target","value","reset","forEach","b","checked","selected","disabled","filter","v","type","o","console","log","includes","tarif"],"mappings":"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","sourcesContent":["// Reservation page\r\nconst reservation = document.querySelector(\"#reservation-form\");\r\nconst vehicles = document.querySelector(\"#vehicles\");\r\nconst vehicleOptions = document.querySelectorAll(\"#vehicles option\");\r\nconst bav = document.getElementsByName(\"bav\");\r\nconst moteur = document.querySelector(\"#moteur\");\r\nconst moteurOptions = document.querySelectorAll(\"#moteur option\");\r\nconst jours = document.querySelector(\"#jours\");\r\nconst rebriquePrix = document.querySelector(\"#rebriquePrix\");\r\nconst moteurTTC = {\r\n  electrique: 0.05,\r\n  hybride: 0.09,\r\n  essence: 0.14,\r\n  diesel: 0.21,\r\n};\r\nlet price = {\r\n  net: 0,\r\n  ttc: 0,\r\n};\r\nlet vehicleData = null;\r\n\r\n// if checkbox is checked, uncheck the other\r\n// bav.forEach((b) => {\r\n//   b.addEventListener(\"click\", (event) => {\r\n//     if (event.target.checked) {\r\n//       bav.forEach((b) => {\r\n//         if (b.id != event.target.id) b.checked = false;\r\n//       });\r\n//     }\r\n//   });\r\n// });\r\n\r\n// Get data from file\r\nfetch(\"./assets/db/vehicles.json\")\r\n  .then((res) => res.json())\r\n  .then((data) => renderVehicle(data));\r\n\r\nfunction renderVehicle(vehiclesData) {\r\n  vehicles.addEventListener(\"change\", (event) => {\r\n    // Reset Form\r\n    if (event.target.value == \"--\") {\r\n      reservation.reset();\r\n      bav.forEach((b) => {\r\n        b.checked = false;\r\n      });\r\n      moteurOptions[0].selected = true;\r\n      jours.value = 1;\r\n      jours.disabled = true;\r\n    } else {\r\n      // Find selected vehicle data\r\n      vehicleData = vehiclesData.filter((v) => v.type == event.target.value)[0];\r\n\r\n      // Check available BAV\r\n      bav.forEach((b) => {\r\n        if (vehicleData.bav == b.value) {\r\n          b.checked = true;\r\n        } else b.checked = false;\r\n      });\r\n\r\n      // reset moteur options\r\n      moteurOptions[0].selected = true;\r\n\r\n      // Disable unavailable Moteurs\r\n      moteurOptions.forEach((o) => {\r\n        console.log(o.disabled);\r\n        if (!vehicleData.moteur.includes(o.value)) o.disabled = true;\r\n        else o.disabled = false;\r\n      });\r\n\r\n      // Enable jours\r\n      jours.disabled = false;\r\n\r\n      // Calculate price without moteur\r\n      price.net =\r\n        vehicleData.bav == \"auto\"\r\n          ? vehicleData.tarif + vehicleData.tarif * 0.19\r\n          : vehicleData.tarif;\r\n\r\n      // Append price to the form\r\n      document.querySelector(\"#prix\").value = price.net;\r\n    }\r\n  });\r\n}\r\n\r\nmoteur.addEventListener(\"change\", (event) => {\r\n  if (!event.target.value == \"--\") {\r\n    // Reset price to net\r\n    price.ttc = price.net;\r\n\r\n    // Append price to the form\r\n    document.querySelector(\"#prix\").value = price.net;\r\n  } else {\r\n    // Calculate price with moteur\r\n    price.ttc = price.net + price.net * moteurTTC[event.target.value];\r\n\r\n    // Append price to the form\r\n    document.querySelector(\"#prix\").value = price.ttc;\r\n  }\r\n});\r\n\r\njours.addEventListener(\"change\", (event) => {\r\n  // Calculate price with number of days\r\n  price.ttc = price.ttc * event.target.value;\r\n\r\n  // Append price to the form\r\n  document.querySelector(\"#prix\").value = price.ttc;\r\n});\r\n"],"file":"reservation.min.js"}